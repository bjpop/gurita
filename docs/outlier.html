<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>outlier &mdash; gurita  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pca" href="pca.html" />
    <link rel="prev" title="normtest" href="normtest.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> gurita
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Gurita: a command line data analytics and plotting tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_input_data.html">Example input data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">General behaviour</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="command_line_syntax.html">Command line syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="list_of_commands.html">List of commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_output.html">Tabular input and output data</a></li>
<li class="toctree-l1"><a class="reference internal" href="input.html">Reading input data</a></li>
<li class="toctree-l1"><a class="reference internal" href="output.html">Writing output data</a></li>
<li class="toctree-l1"><a class="reference internal" href="missing.html">Missing values</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Saving and viewing plots</a></li>
<li class="toctree-l1"><a class="reference internal" href="aesthetics.html">Plot aesthetics</a></li>
<li class="toctree-l1"><a class="reference internal" href="facets.html">Facets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commands</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="io_commands.html">Input and output</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting_commands.html">Plotting</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="transformation_commands.html">Data transformation and analysis</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="corr.html">corr</a></li>
<li class="toctree-l2"><a class="reference internal" href="cut.html">cut</a></li>
<li class="toctree-l2"><a class="reference internal" href="dropna.html">dropna</a></li>
<li class="toctree-l2"><a class="reference internal" href="eval.html">eval</a></li>
<li class="toctree-l2"><a class="reference internal" href="filter.html">filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmm.html">gmm (Gaussian mixture model)</a></li>
<li class="toctree-l2"><a class="reference internal" href="groupby.html">groupby</a></li>
<li class="toctree-l2"><a class="reference internal" href="head.html">head</a></li>
<li class="toctree-l2"><a class="reference internal" href="kmeans.html">kmeans</a></li>
<li class="toctree-l2"><a class="reference internal" href="melt.html">melt</a></li>
<li class="toctree-l2"><a class="reference internal" href="normtest.html">normtest</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">outlier</a></li>
<li class="toctree-l2"><a class="reference internal" href="pca.html">pca</a></li>
<li class="toctree-l2"><a class="reference internal" href="pivot.html">pivot</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample.html">sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="sort.html">sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="tail.html">tail</a></li>
<li class="toctree-l2"><a class="reference internal" href="zscore.html">zscore</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="summary_commands.html">Summary information</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="bug_reports.html">Bug reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="feature_requests.html">Feature requests</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">gurita</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="transformation_commands.html">Data transformation and analysis</a> &raquo;</li>
      <li>outlier</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/outlier.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="outlier">
<span id="id1"></span><h1>outlier<a class="headerlink" href="#outlier" title="Permalink to this headline"></a></h1>
<p>Detect and annotate outliers in numerical columns based on the interquartile range. This method is often called <a class="reference external" href="https://en.wikipedia.org/wiki/Outlier">Tukey’s Fences</a>.</p>
<p>Considering all the numerical values in a particular column we can calculate:</p>
<ul class="simple">
<li><p>Q1 = the first quartile</p></li>
<li><p>Q3 = the third quartile</p></li>
<li><p>IQR = the interquartile range (Q3 - Q1)</p></li>
</ul>
<p>Given some scaling factor S (typically 1.5), a data point x is considered an outlier if either:</p>
<ul class="simple">
<li><p>x &lt; (Q1 - S*IQR), or</p></li>
<li><p>x &gt; (Q3 + S*IQR)</p></li>
</ul>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">outlier</span></code> command does not remove data from the dataset. Instead, it adds an extra boolean column that indicate whether the value in
the corresponding column is an outlier according to the definition above. This allows flexibility in how outliers are subsequently handled.</p>
<p>Multiple columns can be tested for outliers in the same command.</p>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline"></a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita outlier [-h] [-c NAME [NAME ...]] [--suffix SUFFIX] [--iqrscale S]
</pre></div>
</div>
</section>
<section id="arguments">
<h2>Arguments<a class="headerlink" href="#arguments" title="Permalink to this headline"></a></h2>
<table class="colwidths-given tight-table docutils align-default">
<colgroup>
<col style="width: 45%" />
<col style="width: 36%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--help</span></code></p></li>
</ul>
</td>
<td><p>display help for this command</p></td>
<td><p><a class="reference internal" href="#outlier-help"><span class="std std-ref">help</span></a></p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-c</span> <span class="pre">COLUMN</span> <span class="pre">[COLUMN...]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns</span> <span class="pre">COLUMN</span> <span class="pre">[COLUMN...]</span></code></p></li>
</ul>
</td>
<td><p>determine outliers in specified numerical columns</p></td>
<td><p><a class="reference internal" href="#outlier-columns"><span class="std std-ref">outlier columns</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--suffix</span> <span class="pre">SUFFIX</span></code></p></td>
<td><p>choose a column name suffix for new outlier columns (default: outlier)</p></td>
<td><p><a class="reference internal" href="#outlier-suffix"><span class="std std-ref">new column name suffix</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--iqrscale</span> <span class="pre">S</span></code></p></td>
<td><p>scale factor for determining outliers (default: 1.5)</p></td>
<td><p><a class="reference internal" href="#outlier-scale-factor"><span class="std std-ref">scale factor</span></a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="box.html"><span class="doc">Box plots</span></a> also employ the concept of Tukey’s fences for determining outlier values.</p>
<p><a class="reference internal" href="zscore.html"><span class="doc">Z-scores</span></a> can be used to normalise data based on how many standard deviations it is from the mean. This can also be used as a method
for identifying outliers.</p>
</section>
<section id="simple-example">
<h2>Simple example<a class="headerlink" href="#simple-example" title="Permalink to this headline"></a></h2>
<p>The following command determines outliers in the <code class="docutils literal notranslate"><span class="pre">sepal_width</span></code> column in the <code class="docutils literal notranslate"><span class="pre">iris.csv</span></code> dataset:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita outlier -c sepal_width &lt; iris.csv
</pre></div>
</div>
<p>The output is quite long so we can adjust the command to look at only the first few rows using the <a class="reference internal" href="head.html"><span class="doc">head</span></a> command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita outlier -c sepal_width + head &lt; iris.csv
</pre></div>
</div>
<p>The output of the above command is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sepal_length,sepal_width,petal_length,petal_width,species,sepal_width_outlier
5.1,3.5,1.4,0.2,setosa,False
4.9,3.0,1.4,0.2,setosa,False
4.7,3.2,1.3,0.2,setosa,False
4.6,3.1,1.5,0.2,setosa,False
5.0,3.6,1.4,0.2,setosa,False
</pre></div>
</div>
<p>A new boolean column called <code class="docutils literal notranslate"><span class="pre">sepal_width_outlier</span></code> is added to the dataset, indicating whether the value in the specified column is an outlier.
This will be <code class="docutils literal notranslate"><span class="pre">True</span></code> if it is an outlier and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</section>
<section id="getting-help">
<span id="outlier-help"></span><h2>Getting help<a class="headerlink" href="#getting-help" title="Permalink to this headline"></a></h2>
<p>The full set of command line arguments for <code class="docutils literal notranslate"><span class="pre">outlier</span></code> can be obtained with the <code class="docutils literal notranslate"><span class="pre">-h</span></code> or <code class="docutils literal notranslate"><span class="pre">--help</span></code>
arguments:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita outlier -h
</pre></div>
</div>
</section>
<section id="determine-outliers-in-specified-numerical-columns">
<span id="outlier-columns"></span><h2>Determine outliers in specified numerical columns<a class="headerlink" href="#determine-outliers-in-specified-numerical-columns" title="Permalink to this headline"></a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-c NAME [NAME ...], --columns NAME [NAME ...]
</pre></div>
</div>
<p>By default, if no column names are specified, outliers will be detected in all of the numerical columns in the dataset, one at a time.</p>
<p>For example, the following command detects outliers in each of the numerical columns in the <code class="docutils literal notranslate"><span class="pre">iris.csv</span></code>
dataset separately (these are: <code class="docutils literal notranslate"><span class="pre">sepal_length</span></code>, <code class="docutils literal notranslate"><span class="pre">sepal_width</span></code>, <code class="docutils literal notranslate"><span class="pre">petal_length</span></code>, <code class="docutils literal notranslate"><span class="pre">petal_width</span></code>).</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita outlier &lt; iris.csv
</pre></div>
</div>
<p>Sometimes it is useful to specify a subset of columns in which to detect outliers. This can be achieved with the <code class="docutils literal notranslate"><span class="pre">-c/--columns</span></code> argument.</p>
<p>In the following example outliers are detected in only the <code class="docutils literal notranslate"><span class="pre">sepal_length</span></code> and <code class="docutils literal notranslate"><span class="pre">petal_width</span></code> columns:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita outlier -c sepal_length petal_width &lt; iris.csv
</pre></div>
</div>
<p>By chaining this command with <code class="docutils literal notranslate"><span class="pre">head</span></code> we can inspect the first few rows of the output:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita outlier -c sepal_length petal_width + head &lt; iris.csv
</pre></div>
</div>
<p>The output of the above command is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sepal_length,sepal_width,petal_length,petal_width,species,sepal_length_outlier,petal_width_outlier
5.1,3.5,1.4,0.2,setosa,False,False
4.9,3.0,1.4,0.2,setosa,False,False
4.7,3.2,1.3,0.2,setosa,False,False
4.6,3.1,1.5,0.2,setosa,False,False
5.0,3.6,1.4,0.2,setosa,False,False
</pre></div>
</div>
<p>In the above example we can see that outliers are detected in just <code class="docutils literal notranslate"><span class="pre">sepal_length</span></code> and <code class="docutils literal notranslate"><span class="pre">petal_width</span></code>. Two new boolean columns called
<code class="docutils literal notranslate"><span class="pre">sepal_length_outlier</span></code> and <code class="docutils literal notranslate"><span class="pre">petal_width_outlier</span></code> are added to the dataset to flag which rows contain outliers for the corresponding input columns.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Non-numeric columns will be ignored by <code class="docutils literal notranslate"><span class="pre">outlier</span></code> even if they are specified as arguments to <code class="docutils literal notranslate"><span class="pre">-c/--columns</span></code>.</p>
</div>
</section>
<section id="choose-a-column-name-suffix-for-new-outlier-columns">
<span id="outlier-suffix"></span><h2>Choose a column name suffix for new outlier columns<a class="headerlink" href="#choose-a-column-name-suffix-for-new-outlier-columns" title="Permalink to this headline"></a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--suffix SUFFIX
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">outlier</span></code> command adds extra boolean columns to the dataset to flag which rows contain outlier values for the corresponding input columns.</p>
<p>The names of these extra columns are constructed by adding the suffix <code class="docutils literal notranslate"><span class="pre">outlier</span></code> on to the end of the input column names, separated by an underscore.
This can be changed with the <code class="docutils literal notranslate"><span class="pre">--suffix</span></code> argument.</p>
<p>The following command specifies that <code class="docutils literal notranslate"><span class="pre">out</span></code> should be used as the suffix for the newly added columns:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita outlier --suffix out &lt; iris.csv
</pre></div>
</div>
<p>By chaining this command with <code class="docutils literal notranslate"><span class="pre">head</span></code> we can inspect the first few rows of the output:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita outlier --suffix out + head &lt; iris.csv
</pre></div>
</div>
<p>The output of the above command is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sepal_length,sepal_width,petal_length,petal_width,species,sepal_length_out,sepal_width_out,petal_length_out,petal_width_out
5.1,3.5,1.4,0.2,setosa,False,False,False,False
4.9,3.0,1.4,0.2,setosa,False,False,False,False
4.7,3.2,1.3,0.2,setosa,False,False,False,False
4.6,3.1,1.5,0.2,setosa,False,False,False,False
5.0,3.6,1.4,0.2,setosa,False,False,False,False
</pre></div>
</div>
</section>
<section id="scale-factor-for-determining-outliers">
<span id="outlier-scale-factor"></span><h2>Scale factor for determining outliers<a class="headerlink" href="#scale-factor-for-determining-outliers" title="Permalink to this headline"></a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--iqrscale S
</pre></div>
</div>
<p>As noted earlier, given quartiles Q1 and Q3 and some scaling factor S, a data point x is considered an outlier if either:</p>
<ul class="simple">
<li><p>x &lt; (Q1 - S*IQR), or</p></li>
<li><p>x &gt; (Q3 + S*IQR)</p></li>
</ul>
<p>By default the scaling factor S is equal to 1.5, however this can be changed with the <code class="docutils literal notranslate"><span class="pre">--iqrscale</span></code> argument.</p>
<p>Setting the scaling factor higher means that values must be more extreme before being considered outliers. Setting it lower has the opposite effect.</p>
<p>The following command specifies a scaling factor of 3:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita outlier --iqrscale 3 &lt; iris.csv
</pre></div>
</div>
<p>The more stringent scaling factor of 3 produces fewer outlier values than the default setting of 1.5.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="normtest.html" class="btn btn-neutral float-left" title="normtest" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pca.html" class="btn btn-neutral float-right" title="pca" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>