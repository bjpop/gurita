<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Input and output data &mdash; hatch  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Saving and viewing plots" href="plotting.html" />
    <link rel="prev" title="Command line syntax" href="command_line_syntax.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> hatch
            <img src="_static/hatch_logo_small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Hatch: a command line data analytics and plotting tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_input_data.html">Example input data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">General behaviour</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="command_line_syntax.html">Command line syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line_syntax.html#list-of-commands">List of commands</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Input and Output</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Input and output data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#input-data">Input data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#input-from-a-named-file">Input from a named file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#specifying-input-file-type-explicitly">Specifying input file type explicitly</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#input-from-standard-input-stdin">Input from standard input (stdin)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implicit-csv-input-from-standard-input-stdin">Implicit CSV input from standard input (stdin)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reading-input-from-more-than-one-file-in-a-command-chain">Reading input from more than one file in a command chain</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#output-data">Output data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#output-to-a-named-file">Output to a named file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#specifying-output-file-type-explicitly">Specifying output file type explicitly</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#output-to-standard-output-stdout">Output to standard output (stdout)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implicit-csv-output-to-standard-output-stdout">Implicit CSV output to standard output (stdout)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#writing-output-to-more-than-one-file-in-a-command-chain">Writing output to more than one file in a command chain</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-hatch-to-convert-between-tsv-and-csv-formats">Using Hatch to convert between TSV and CSV formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#na-values">NA values</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Saving and viewing plots</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plotting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bar.html">Bar</a></li>
<li class="toctree-l1"><a class="reference internal" href="box.html">Box</a></li>
<li class="toctree-l1"><a class="reference internal" href="boxen.html">Boxen</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustermap.html">Clustermap</a></li>
<li class="toctree-l1"><a class="reference internal" href="count.html">Count</a></li>
<li class="toctree-l1"><a class="reference internal" href="heatmap.html">Heatmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="histogram.html">Histogram</a></li>
<li class="toctree-l1"><a class="reference internal" href="line.html">Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="point.html">Point</a></li>
<li class="toctree-l1"><a class="reference internal" href="scatter.html">Scatter</a></li>
<li class="toctree-l1"><a class="reference internal" href="strip.html">Strip</a></li>
<li class="toctree-l1"><a class="reference internal" href="swarm.html">Swarm</a></li>
<li class="toctree-l1"><a class="reference internal" href="violin.html">Violin</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Facets</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="facets.html">Facets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plot aesthetics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="aesthetics.html">Plot aesthetics</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Transformation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cut.html">Cut</a></li>
<li class="toctree-l1"><a class="reference internal" href="dropna.html">Dropna</a></li>
<li class="toctree-l1"><a class="reference internal" href="eval.html">Eval</a></li>
<li class="toctree-l1"><a class="reference internal" href="filter.html">Filter</a></li>
<li class="toctree-l1"><a class="reference internal" href="gmm.html">Gmm (Gaussian mixture model)</a></li>
<li class="toctree-l1"><a class="reference internal" href="pca.html">Principal Component Analysis (PCA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample.html">Random sampling</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Summary information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="describe.html">Summarising input data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker container</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="bug_reports.html">Bug reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="feature_requests.html">Feature requests</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hatch</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Input and output data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/input_output.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="input-and-output-data">
<span id="input-output"></span><h1>Input and output data<a class="headerlink" href="#input-and-output-data" title="Permalink to this headline"></a></h1>
<p>Hatch works on tabular input data in <a class="reference external" href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV (comma separated values)</a> or <a class="reference external" href="https://en.wikipedia.org/wiki/Tab-separated_values">TSV (tab separated values)</a> format.</p>
<p>Input data is read from a named file or the standard input (stdin). Data can be written to a named file or standard output (stdout).</p>
<p>Rows in the input file are considered to be “observations” and columns are considered to be “features” (or variables).
That is, each data row is a discrete observation of some thing (a data point), and each observation is described by the values of its features.
The names of the features are given in the first row of the input file (the heading row).</p>
<p>Below is a small example of the kind of input data accepted by Hatch. In this case it is in CSV format with five columns, one heading row and three data rows.
The first row contains the names of each column. The remaining three rows are data rows,
where each row has a value associated with each column:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sepal_length,sepal_width,petal_length,petal_width,species
5.1,3.5,1.4,0.2,setosa
4.9,3.0,1.4,0.2,virginica
4.7,3.2,1.3,0.2,setosa
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hatch requires that the input data is <strong>rectangular</strong> in shape. In other words, every row must contain the same number of columns.
Missing values are allowed, and are indicated by leaving a particular column blank (empty) on a given row; nonetheless the column
must still be present.</p>
</div>
<section id="input-data">
<span id="input-files"></span><h2>Input data<a class="headerlink" href="#input-data" title="Permalink to this headline"></a></h2>
<p>Hatch can read data from a named input file or standard input (stdin).</p>
<section id="input-from-a-named-file">
<h3>Input from a named file<a class="headerlink" href="#input-from-a-named-file" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">in</span></code> command allows you to specify an input file by name:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in titanic.csv ...
</pre></div>
</div>
<p>We use <code class="docutils literal notranslate"><span class="pre">...</span></code> to indicate that the remainder of the example Hatch command is omitted for the sake of simplifying the discussion.</p>
<p>You should imagine that <code class="docutils literal notranslate"><span class="pre">...</span></code> would be replaced by more text to complete the command.
For example, if you wanted to generate a count plot of the <code class="docutils literal notranslate"><span class="pre">class</span></code> feature in the <code class="docutils literal notranslate"><span class="pre">titanic.csv</span></code> file, the <code class="docutils literal notranslate"><span class="pre">...</span></code> in the above example could be expanded like so:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in titanic.csv + count -x class
</pre></div>
</div>
<p>In the above example data is read from the input file and then passed along the <a class="reference internal" href="command_line_syntax.html#command-chain"><span class="std std-ref">command chain</span></a> from left to right into the <code class="docutils literal notranslate"><span class="pre">count</span></code> command to make a plot.</p>
<p>When reading input from a named file (and not from standard input) Hatch will look at the file extension and assume CSV format if the extension is <code class="docutils literal notranslate"><span class="pre">.csv</span></code> and TSV format if the extension is <code class="docutils literal notranslate"><span class="pre">.tsv</span></code>. This behaviour can be overridden with the
<code class="docutils literal notranslate"><span class="pre">--format</span> <span class="pre">&lt;type&gt;</span></code> option as noted below.</p>
<section id="specifying-input-file-type-explicitly">
<h4>Specifying input file type explicitly<a class="headerlink" href="#specifying-input-file-type-explicitly" title="Permalink to this headline"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">in</span></code> command lets you specify the format of the input file explicitly. This will override any default behaviour that Hatch would otherwise have when determining the input file type.</p>
<p>Request for CSV file format:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in --format csv ...
</pre></div>
</div>
<p>Request for TSV file format:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in --format tsv ...
</pre></div>
</div>
<p>Elaborating the above example to a full command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in --format tsv example_filename + count -x class
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">--format</span> <span class="pre">&lt;type&gt;</span> <span class="pre">...</span></code> forces Hatch to use the specified input type regardless of the filename extension or contents of the file.</p>
</div>
</section>
</section>
<section id="input-from-standard-input-stdin">
<h3>Input from standard input (stdin)<a class="headerlink" href="#input-from-standard-input-stdin" title="Permalink to this headline"></a></h3>
<p>If you don’t specify a file name when using the <code class="docutils literal notranslate"><span class="pre">in</span></code> command Hatch will assume that the input should be read from standard input (stdin).</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in + count -x class &lt; titanic.csv
</pre></div>
</div>
<p>In the above example the notation <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">titanic.csv</span></code> causes the contents of the file <code class="docutils literal notranslate"><span class="pre">titantic.csv</span></code> to be fed into the standard input of Hatch.
This is called <em>input redirection</em>.</p>
<p>Instead of using input redirection, it is also possible to <em>pipe</em> the output from another command to the standard input of Hatch:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat titanic.csv | hatch in + count -x class
</pre></div>
</div>
<p>In the above example the command <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">titanic.csv</span></code> outputs the contents of the file <code class="docutils literal notranslate"><span class="pre">titanic.csv</span></code> to standard output which is then fed through a pipe using the <code class="docutils literal notranslate"><span class="pre">|</span></code> (vertical bar) operator
into the standard input of Hatch.</p>
<p>Reading from standard input is particularly useful when you want to use Hatch as part of a command pipeline:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>example_command | hatch in + count -x class
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">example_command</span></code> is supposed to represent an arbitrary command, possibly itself a series of commands piped together, whose ouput is sent as input into Hatch.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Standard input defaults to CSV format</strong></p>
<p>For performance reasons Hatch does not try to detect the format of the input file when reading from standard input.</p>
<p>Therefore, when reading from standard input, unless otherwise specified, Hatch assumes that the file is in CSV format.</p>
<p>This can be overridden by <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">--format</span> <span class="pre">tsv</span> <span class="pre">...</span></code></p>
<p>As previously noted, when reading from a named file Hatch will try to use the file name extension to determine the file format, avoiding the need to specify <code class="docutils literal notranslate"><span class="pre">--format</span></code>.</p>
<p><strong>Standard input can only be read once in a Hatch command</strong></p>
<p>A Hatch command can only read from standard input at most once in a command. An attempt to read from standard input more than once will result in an error:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in + count -x class + in &lt; titanic.csv
hatch ERROR: stdin may only be used at most once, and only as the first command; exiting
</pre></div>
</div>
<p><strong>Standard input can only be read at the start of a command</strong></p>
<p>Hatch will only permit standard input to be read at the start of a command chain. Therefore it is an error to request to read
from standard input in any position other then the first command in the chain:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch count -x class + in &lt; titanic.csv
hatch ERROR: stdin may only be used at most once, and only as the first command; exiting
</pre></div>
</div>
<p>Note that this restriction is only a concern when using the <code class="docutils literal notranslate"><span class="pre">in</span></code> command to read from standard input, and does
not apply when reading from standard input implicitly (as noted below).</p>
</div>
</section>
<section id="implicit-csv-input-from-standard-input-stdin">
<h3>Implicit CSV input from standard input (stdin)<a class="headerlink" href="#implicit-csv-input-from-standard-input-stdin" title="Permalink to this headline"></a></h3>
<p>For convenience, if you don’t specify how to read input, Hatch will assume you wanted to read from standard input in CSV format.</p>
<p>Therefore:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in + &lt;rest of command&gt;
</pre></div>
</div>
<p>can be simplified to:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch &lt;rest of command&gt;
</pre></div>
</div>
<p>In other words, if a Hatch command starts with <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">+</span></code> you can simply omit that part, and Hatch will implicitly read from standard input using CSV format. This saves you a bit of typing and makes the command line tidier.</p>
<p>As a concrete example, the following command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat titanic.csv | hatch in + count -x class
</pre></div>
</div>
<p>can be simplified to:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat titanic.csv | hatch count -x class
</pre></div>
</div>
<p>or, of course, you could achieve the same result with input redirection, again dropping the <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">+</span></code> from the original command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch count -x class &lt; titanic.csv
</pre></div>
</div>
<p>Note carefully that when implicitly reading from standard input Hatch will always assume the input file is in CSV format. If you want to read a different format from standard input you must explicitly specify
the type using: <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">--format</span> <span class="pre">&lt;type&gt;</span> <span class="pre">...</span></code></p>
<section id="reading-input-from-more-than-one-file-in-a-command-chain">
<h4>Reading input from more than one file in a command chain<a class="headerlink" href="#reading-input-from-more-than-one-file-in-a-command-chain" title="Permalink to this headline"></a></h4>
<p>You may read input from more than one file in a command chain, but only when each of those files is read from a named file (and not standard input).</p>
<p>For example you can do something like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in titanic.csv + ... + in iris.csv + ...
</pre></div>
</div>
<p>In the above example, first <code class="docutils literal notranslate"><span class="pre">titanic.csv</span></code> is read as input, then some unspecified commands are run, and later <code class="docutils literal notranslate"><span class="pre">iris.csv</span></code> is read as input, and some more unspecified commands are run.</p>
<p>Whenever a new input is read from a named file the contents of that file become the current data set, and any previous data set in the command chain is discarded.</p>
<p>The following command is a more concrete example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in titanic.csv + hist -x fare + in iris.csv + count -x species
</pre></div>
</div>
<p>There are four parts to the above command chain:</p>
<ol class="arabic simple">
<li><p>input is read from the <code class="docutils literal notranslate"><span class="pre">titanic.csv</span></code> file, this becomes the current data set</p></li>
<li><p>a histogram is plotted of the <code class="docutils literal notranslate"><span class="pre">fare</span></code> column from the current (titanic) data set, generating an output file called <code class="docutils literal notranslate"><span class="pre">hist.fare.png</span></code></p></li>
<li><p>input is read from the <code class="docutils literal notranslate"><span class="pre">iris.csv</span></code> file, this becomes the new current data set, replacing the titanic data set, which is now discarded</p></li>
<li><p>a count plot is created using the <code class="docutils literal notranslate"><span class="pre">species</span></code> column for the X axis from the current (iris) data set, generating an output file called <code class="docutils literal notranslate"><span class="pre">count.species.png</span></code></p></li>
</ol>
</section>
</section>
</section>
<section id="output-data">
<span id="output-files"></span><h2>Output data<a class="headerlink" href="#output-data" title="Permalink to this headline"></a></h2>
<p>Hatch can write data to a named output file or standard output (stdout).</p>
<section id="output-to-a-named-file">
<h3>Output to a named file<a class="headerlink" href="#output-to-a-named-file" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">out</span></code> command allows you to specify an output file by name:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch ... + out newfile.csv
</pre></div>
</div>
<p>As before, we use <code class="docutils literal notranslate"><span class="pre">...</span></code> to indicate that part of the example Hatch command is omitted for the sake of simplifying the discussion.</p>
<p>You should imagine that <code class="docutils literal notranslate"><span class="pre">...</span></code> would be replaced by more text to complete the command.
For example, the following command reads the file <code class="docutils literal notranslate"><span class="pre">titanic.csv</span></code> from standard input and then saves the header row and first ten data rows to an output file called <code class="docutils literal notranslate"><span class="pre">newfile.csv</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat titanic.csv | hatch head 10 + out newfile.csv
</pre></div>
</div>
<p>Again we see <a class="reference internal" href="command_line_syntax.html#command-chain"><span class="std std-ref">command chaining</span></a> in action, where the first command <code class="docutils literal notranslate"><span class="pre">head</span> <span class="pre">10</span></code> transforms the input data before it is passed along to the <code class="docutils literal notranslate"><span class="pre">out</span> <span class="pre">newfile.csv</span></code> command.</p>
<p>When writing output to a named file (and not to standard output) Hatch will look at the file extension and assume CSV format if the extension is <code class="docutils literal notranslate"><span class="pre">.csv</span></code> and TSV format if the extension is <code class="docutils literal notranslate"><span class="pre">.tsv</span></code>. This behaviour can be overridden with the
<code class="docutils literal notranslate"><span class="pre">--format</span> <span class="pre">&lt;type&gt;</span></code> option as noted below. This mimics the behaviour of the <code class="docutils literal notranslate"><span class="pre">in</span></code> command for reading input from files, as discussed previously.</p>
<section id="specifying-output-file-type-explicitly">
<h4>Specifying output file type explicitly<a class="headerlink" href="#specifying-output-file-type-explicitly" title="Permalink to this headline"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">out</span></code> command lets you specify the format of the output file explicitly. This will override any default behaviour that Hatch would otherwise have when determining the output file type.</p>
<p>Request for CSV file format:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch ... out --format csv ...
</pre></div>
</div>
<p>Request for TSV file format:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch ... out --format tsv ...
</pre></div>
</div>
<p>Elaborating the above example to a full command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat titanic.csv | hatch head 10 + out --format tsv example_filename
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">out</span> <span class="pre">--format</span> <span class="pre">&lt;type&gt;</span> <span class="pre">...</span></code> forces Hatch to use the specified output type regardless of the filename extension or contents of the file.</p>
</div>
</section>
</section>
<section id="output-to-standard-output-stdout">
<h3>Output to standard output (stdout)<a class="headerlink" href="#output-to-standard-output-stdout" title="Permalink to this headline"></a></h3>
<p>If you don’t specify a file name when using the <code class="docutils literal notranslate"><span class="pre">out</span></code> command Hatch will assume that the output should be written to standard output (stdout).</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat titanic.csv | hatch head 10 + out
</pre></div>
</div>
<p>Writing to standard output is particularly useful when you want to use Hatch as part of a command pipeline:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch ... + out | example_command
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">example_command</span></code> is supposed to represent an arbitrary command, possibly itself a series of commands piped together, whose input comes from the standard output of Hatch.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Standard output defaults to CSV format</strong></p>
<p>When writing to standard output, unless otherwise specified, Hatch assumes that the file is in CSV format.</p>
<p>This can be overridden by <code class="docutils literal notranslate"><span class="pre">out</span> <span class="pre">--format</span> <span class="pre">tsv</span></code></p>
<p>As previously noted, when writing to a named file Hatch will try to use the file name extension to determine the file format, avoiding the need to specify <code class="docutils literal notranslate"><span class="pre">--format</span></code>.</p>
</div>
</section>
<section id="implicit-csv-output-to-standard-output-stdout">
<h3>Implicit CSV output to standard output (stdout)<a class="headerlink" href="#implicit-csv-output-to-standard-output-stdout" title="Permalink to this headline"></a></h3>
<p>In some circumstances, for convenience, Hatch will implicitly write the final state of the data to standard output. It chooses to do this in precisely two circumstances, when
the last command in a chain is either:</p>
<blockquote>
<div><ul class="simple">
<li><p>a data transformation</p></li>
<li><p>an input command (including implicitly reading from standard input)</p></li>
</ul>
</div></blockquote>
<p>However, Hatch will <em>not</em> implicitly write the final state of the data to standard output when the last command in a chain is either:</p>
<blockquote>
<div><ul class="simple">
<li><p>a plotting command</p></li>
<li><p>a data summary command</p></li>
<li><p>an <code class="docutils literal notranslate"><span class="pre">out</span></code> command</p></li>
</ul>
</div></blockquote>
<p>The logic for this behaviour is as follows.</p>
<p>If the last command in a chain is a transformation or just an input command, Hatch assumes that you must have read/transformed the data for a reason and you probably
want to save/use the result. And because you didn’t explicitly end the chain with an <code class="docutils literal notranslate"><span class="pre">out</span></code> command, the final state of the data would otherwise be lost. So Hatch writes it to standard output in CSV format for you.</p>
<p>If the last command in a chain is a plotting command, then Hatch assumes that your main purpose must have been to generate the plot, and therefore you are not interested in saving/using the final state of the data.
Similarly for situations when the last command shows summary information about the data, such as <code class="docutils literal notranslate"><span class="pre">pretty</span></code>.
If you want to make a plot or see summary information <em>and</em> save the final state of the data you can always achieve this by ending a chain with an explicit <code class="docutils literal notranslate"><span class="pre">out</span></code> command.</p>
<p>If the last command in a chain is an <code class="docutils literal notranslate"><span class="pre">out</span></code> command there is no need for implicit output.</p>
<p>Therefore:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch &lt;transformation or input command&gt; + out
</pre></div>
</div>
<p>can be simplified to:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch &lt;transformation or input command&gt;
</pre></div>
</div>
<p>As a concrete example, the following command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat titanic.csv | hatch head 10 + out
</pre></div>
</div>
<p>can be simplified to:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat titanic.csv | hatch head 10
</pre></div>
</div>
<p>or, of course, you could achieve the same result with input redirection, again dropping the <code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">out</span></code> from the original command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch head 10 &lt; titanic.csv
</pre></div>
</div>
<p>Note carefully that when implicitly writing to standard output Hatch will always assume the output file should be written in CSV format. If you want to read a different format from standard input you must explicitly specify
the type using: <code class="docutils literal notranslate"><span class="pre">out</span> <span class="pre">--format</span> <span class="pre">&lt;type&gt;</span> <span class="pre">...</span></code></p>
<section id="writing-output-to-more-than-one-file-in-a-command-chain">
<h4>Writing output to more than one file in a command chain<a class="headerlink" href="#writing-output-to-more-than-one-file-in-a-command-chain" title="Permalink to this headline"></a></h4>
<p>You may write output to more than one file in a command chain, both to named files and standard output.</p>
<p>For example you can do something like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch ... out newfile1.csv + ... + out newfile2.tsv + ...
</pre></div>
</div>
<p>In the above example, output is written to <code class="docutils literal notranslate"><span class="pre">newfile1.csv</span></code> in CSV format, then some unspecified commands are run, and later output is written to <code class="docutils literal notranslate"><span class="pre">newfile2.tsv</span></code> in TSV format, and some more unspecified commands are run.</p>
<p>Each invocation of <code class="docutils literal notranslate"><span class="pre">out</span></code> causes the current data set to be output to a file or standard output. When used in a chain of commands <code class="docutils literal notranslate"><span class="pre">out</span></code> also passes the current data set along unmodified to the next command in the chain. This allows
the data to be passed along from left to right in the chain with further processing of the data occurring after the <code class="docutils literal notranslate"><span class="pre">out</span></code> command has been executed.</p>
<p>This is most useful when you want to save different states of the data as it undergoes various transformations in a command chain.</p>
<p>Note that if multiple different writes to standard output are used, they will form a single concatenated stream of data.</p>
<p>The following command is a more concrete example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in iris.csv + sample 0.6 + out samp.csv + cut -c sepal_length + out len.tsv
</pre></div>
</div>
<p>There are five parts to the above command chain:</p>
<ol class="arabic simple">
<li><p>input is read from the <code class="docutils literal notranslate"><span class="pre">iris.csv</span></code> file, this becomes the current data set</p></li>
<li><p>60% of the data rows in the current data set are randomly sampled, the remaining 40% of the rows are discareded</p></li>
<li><p>the current (sampled) data set is written to the output file <code class="docutils literal notranslate"><span class="pre">sample.csv</span></code> in CSV format</p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">sepal_length</span></code> column is selected from the current (sampled) data set and the remaining columns are discareded</p></li>
<li><p>the final (cut and sampled) data set is written to the output file <code class="docutils literal notranslate"><span class="pre">len.tsv</span></code> in TSV format</p></li>
</ol>
</section>
</section>
</section>
<section id="using-hatch-to-convert-between-tsv-and-csv-formats">
<h2>Using Hatch to convert between TSV and CSV formats<a class="headerlink" href="#using-hatch-to-convert-between-tsv-and-csv-formats" title="Permalink to this headline"></a></h2>
<p>Hatch can read and write data in both CSV and TSV formats. Therefore, one simple, but useful thing it can easily do is convert data files
between those formats. Notably, in such conversions it will handle corner cases correctly, such as proper quotation of data values, and
appropriate formatting of missing (NA) values.</p>
<p>For example, the following commands all convert the <code class="docutils literal notranslate"><span class="pre">iris.csv</span></code> file (in CSV format) into TSV format, and save the result in a file called <code class="docutils literal notranslate"><span class="pre">iris.tsv</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat iris.csv | hatch out --format tsv &gt; iris.tsv
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat iris.csv | hatch out iris.tsv
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in iris.csv + out iris.tsv
</pre></div>
</div>
<p>Conversely, the following commands all convert the <code class="docutils literal notranslate"><span class="pre">iris.tsv</span></code> file (in TSV format) into CSV format, and save the result in a file called <code class="docutils literal notranslate"><span class="pre">iris.csv</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat iris.tsv | hatch out &gt; iris.csv
</pre></div>
</div>
<p>Note that in the above example there is no need to specify that the output file is in CSV format because that is the default behaviour of the <code class="docutils literal notranslate"><span class="pre">out</span></code> command.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat iris.csv | hatch out iris.csv
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hatch in iris.tsv + out iris.csv
</pre></div>
</div>
</section>
<section id="na-values">
<span id="navalues"></span><h2>NA values<a class="headerlink" href="#na-values" title="Permalink to this headline"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="command_line_syntax.html" class="btn btn-neutral float-left" title="Command line syntax" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plotting.html" class="btn btn-neutral float-right" title="Saving and viewing plots" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>