<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Command line syntax &mdash; gurita  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Input and output" href="input_output.html" />
    <link rel="prev" title="Example input data" href="example_input_data.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> gurita
            <img src="_static/gurita_using_computer.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Gurita: a command line data analytics and plotting tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_input_data.html">Example input data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">General behaviour</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Command line syntax</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#commands">Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-command">Example command</a></li>
<li class="toctree-l3"><a class="reference internal" href="#types-of-commands">Types of commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#command-chaining">Command chaining</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#command-chaining-example">Command chaining example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#getting-help">Getting help</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-number">Version number</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="input_output.html">Input and output</a></li>
<li class="toctree-l1"><a class="reference internal" href="missing.html">Missing values</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="list_of_commands.html">List of commands</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="bug_reports.html">Bug reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="feature_requests.html">Feature requests</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">gurita</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Command line syntax</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/command_line_syntax.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="command-line-syntax">
<h1>Command line syntax<a class="headerlink" href="#command-line-syntax" title="Permalink to this headline"></a></h1>
<p>Gurita provides a <a class="reference internal" href="list_of_commands.html#list-of-commands"><span class="std std-ref">suite of commands</span></a>, each carrying out a specific task.</p>
<p>Commands can be <a class="reference internal" href="#command-chain"><span class="std std-ref">chained together</span></a> in a modular fashion for more complex analysis pipelines.</p>
<section id="commands">
<span id="single-command"></span><h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline"></a></h2>
<p>Gurita commands have the following structure:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita &lt;command&gt; [arguments]
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> is the command name (e.g. <code class="docutils literal notranslate"><span class="pre">hist</span></code> or <code class="docutils literal notranslate"><span class="pre">pca</span></code>), and <code class="docutils literal notranslate"><span class="pre">arguments</span></code> is a list of options that control the behaviour of the command. In some cases the <code class="docutils literal notranslate"><span class="pre">arguments</span></code> can be empty.</p>
<p>See the <a class="reference internal" href="list_of_commands.html#list-of-commands"><span class="std std-ref">list of commands</span></a> for a summary of all the available commands.</p>
<section id="example-command">
<h3>Example command<a class="headerlink" href="#example-command" title="Permalink to this headline"></a></h3>
<p>For instance, the following invocation of Gurita will plot a histogram of the <code class="docutils literal notranslate"><span class="pre">passengers</span></code> column from the file <code class="docutils literal notranslate"><span class="pre">flights.csv</span></code> read from standard input:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita hist -x passengers &lt; flights.csv
</pre></div>
</div>
<p>In the above example <code class="docutils literal notranslate"><span class="pre">hist</span> <span class="pre">-x</span> <span class="pre">passengers</span></code> is a single command. <code class="docutils literal notranslate"><span class="pre">hist</span></code> is the name of the command for plotting histograms, and <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">passengers</span></code> is an argument that tells the command to use the <code class="docutils literal notranslate"><span class="pre">passengers</span></code> column for the X axis. The notation <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">flights.csv</span></code> redirects the contents of the <code class="docutils literal notranslate"><span class="pre">flights.csv</span></code> file into the standard input of Gurita. See the section on <a class="reference internal" href="input_output.html#input-output"><span class="std std-ref">input and output</span></a> for more information about input and output files.</p>
<p>The same outcome can be achieved equivalently by the following invocation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat flights.csv | gurita hist -x passengers
</pre></div>
</div>
<p>In the above example the contents of <code class="docutils literal notranslate"><span class="pre">flights.csv</span></code> is piped into the standard input of Gurita using the Unix pipe operator. Despite the different notation, this has the same effect as the previous example.</p>
</section>
<section id="types-of-commands">
<h3>Types of commands<a class="headerlink" href="#types-of-commands" title="Permalink to this headline"></a></h3>
<p>Commands fall into four types:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="list_of_commands.html#input-output-command-list"><span class="std std-ref">input/output</span></a>: reading and writing data</p></li>
<li><p><a class="reference internal" href="list_of_commands.html#plotting-command-list"><span class="std std-ref">plotting</span></a>: visualising data as plots</p></li>
<li><p><a class="reference internal" href="list_of_commands.html#transformation-command-list"><span class="std std-ref">transformation and analysis</span></a>: manipulating and analysing data</p></li>
<li><p><a class="reference internal" href="list_of_commands.html#summary-command-list"><span class="std std-ref">summary information</span></a>: getting an overview of data</p></li>
</ol>
</section>
</section>
<section id="command-chaining">
<span id="command-chain"></span><h2>Command chaining<a class="headerlink" href="#command-chaining" title="Permalink to this headline"></a></h2>
<p>In more complex cases mulitple commands can be chained together into a pipeline. Gurita uses the plus sign <code class="docutils literal notranslate"><span class="pre">+</span></code> to separate each command in the chain:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita &lt;command_1&gt; + &lt;command_2&gt; + ... + &lt;command_n&gt;
</pre></div>
</div>
<p>Each command has its own optional arguments, so the chaining syntax is more completely characterised as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita &lt;command_1&gt; [arguments_1] + &lt;command_2&gt; [arguments_2] + ... + &lt;command_n&gt; [arguments_n]
</pre></div>
</div>
<p>The idea with command chaining is to build a <em>pipeline</em> of data transformation and/or plotting. This allows you to build complex analytics processes by joining commands together in sequence.</p>
<p>The most important detail about command chaining is that data flows from left to right in the chain, as illustrated in the following diagram:</p>
<img alt="Illustration of data flow direction in Gurita command chain" class="align-center" src="_images/gurita_command_chain_data_flow.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Each command in the chain <em>may</em> transform the data before passing it along to the next command. Some commands, notably the plotting ones, pass the data along unchanged.</p>
<p>In the above diagram data<sub>0</sub> is the initial input to the Gurita, data<sub>1</sub> is the output from command<sub>1</sub>, and so on, and lastly, data<sub>n</sub> is the final output from the last command in the chain.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Motivation for command chaining using +</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">+</span></code> operator in Gurita acts like the pipe operator <code class="docutils literal notranslate"><span class="pre">|</span></code> in the Unix shell. The main advantage of the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator compared to <code class="docutils literal notranslate"><span class="pre">|</span></code> is that data is transferred between consecutive commands efficiently.</p>
<p>It is <em>possible</em> to join Gurita commands into a pipeline using the <code class="docutils literal notranslate"><span class="pre">|</span></code> shell operator, like so:</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita &lt;command_1&gt; [arguments_1] | gurita &lt;command_2&gt; [arguments_2]
</pre></div>
</div>
</div></blockquote>
<p>Note that this requires the Gurita program to be invoked multiple times in the same pipeline.</p>
<p>The main downside of using <code class="docutils literal notranslate"><span class="pre">|</span></code> pipelines is that it requires the entire dataset to be serialised into a text stream between each
command. This is redundant, inefficient, and therefore slow, particularly for large datasets.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">+</span></code> operator lets you compose a pipeline using a single invocation of Gurita and, <em>most importantly</em>, data is passed between
successive commands in the chain efficiently. There is no serialisation to a text stream in between commands. Therefore using <code class="docutils literal notranslate"><span class="pre">+</span></code> will
be much faster than <code class="docutils literal notranslate"><span class="pre">|</span></code>, especially for complex pipelines and large datasets.</p>
</div>
<section id="command-chaining-example">
<h3>Command chaining example<a class="headerlink" href="#command-chaining-example" title="Permalink to this headline"></a></h3>
<p>The following is a more advanced example of command chaining in Gurita, consisting of four commands:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat iris.csv | gurita filter &#39;species != &quot;virginica&quot;&#39; \
                      + sample 0.9 \
                      + pca \
                      + scatter -x pc1 -y pc2 --hue species
</pre></div>
</div>
<p>The above command is split over multiple lines for clarity, using the backslash <code class="docutils literal notranslate"><span class="pre">\</span></code> to split lines.</p>
<p>Equivalently, the same command can be written in a single line, like so (where backslashes are no longer required):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat iris.csv | gurita filter &#39;species != &quot;virginica&quot;&#39; + sample 0.9 + pca + scatter -x pc1 -y pc2 --hue species
</pre></div>
</div>
<p>To understand how it works it is useful to break it down into parts.</p>
<p>To begin with, the contents of the file <code class="docutils literal notranslate"><span class="pre">iris.csv</span></code> is piped into the standard input of Gurita:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cat iris.csv | gurita ...
</pre></div>
</div>
<p>Note that input redirection would also achieve the same behaviour:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita ... &lt; iris.csv
</pre></div>
</div>
<p>This data is then passed through the chain of commands from left to right. Along the way the data may be transformed, displayed or plotted.</p>
<p>The first command in the chain is a filter:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>filter &#39;species != &quot;virginica&quot;&#39;
</pre></div>
</div>
<p>The argument to <code class="docutils literal notranslate"><span class="pre">filter</span></code> is a logical expression that will typically refer to one or more columns of the data set. The <code class="docutils literal notranslate"><span class="pre">filter</span></code> command tests the condition on each row in the data set.
If the condition is true the row is retained, and if the condition is false the row is discarded. In this case the filter keeps only those
data rows where the value in the <code class="docutils literal notranslate"><span class="pre">species</span></code> column is not equal (<code class="docutils literal notranslate"><span class="pre">!=</span></code>) to <code class="docutils literal notranslate"><span class="pre">virginica</span></code>.</p>
<p>Note that the entire locial expression is written inside single quotes <code class="docutils literal notranslate"><span class="pre">'...'</span></code>. This ensures that the expression is treated as a single string.</p>
<p>In this example, the input to the <code class="docutils literal notranslate"><span class="pre">filter</span></code> command is the contents of
<code class="docutils literal notranslate"><span class="pre">iris.csv</span></code> and the output is a filtered version of the data set. Therefore the <code class="docutils literal notranslate"><span class="pre">filter</span></code> command <em>transforms</em> the data, and the transformed
data is fed into the next command in the chain, moving left to right.</p>
<p>The second command in the chain is a random sampling of the data:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sample 0.9
</pre></div>
</div>
<p>This randomly retains 90% (0.9) data rows from its input and discards the rest. Similar to <code class="docutils literal notranslate"><span class="pre">filter</span></code>, the <code class="docutils literal notranslate"><span class="pre">sample</span></code> command <em>transforms</em> the data, and the
transformed data is fed into the next command in the chain, moving left to right.</p>
<p>The net result of the two commands we have discussed so far is to remove all the data rows where <code class="docutils literal notranslate"><span class="pre">species</span></code> equals <code class="docutils literal notranslate"><span class="pre">virginica</span></code>, and then a random selection of
90% of those rows are kept (and thus 10% are removed).</p>
<p>The third command in the chain is a principal component analysis (PCA):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pca
</pre></div>
</div>
<p>This computes the first two (by default) principal components of its input data (considering only the numerical columns). Again, this is a transformation of
the data. The interesting thing about <code class="docutils literal notranslate"><span class="pre">pca</span></code> is that it retains all the data rows in the input and <em>appends</em> extra columns to each row. In this case
it adds columns called <code class="docutils literal notranslate"><span class="pre">pc1</span></code> and <code class="docutils literal notranslate"><span class="pre">pc2</span></code> representing the first two principal components. You can optionally request more principal components to be computed,
and in those cases more columns would be added, one for each component.</p>
<p>The fourth (and last) command in the chain creates a scatter plot:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>scatter -x pc1 -y pc2 --hue species
</pre></div>
</div>
<p>The X and Y axes of the scatter plot are defined by the options <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">pc1</span> <span class="pre">-y</span> <span class="pre">pc2</span></code>. Here you can see that the axes are defined to correspond to columns in the data. In this
case they are <code class="docutils literal notranslate"><span class="pre">pc1</span></code> and <code class="docutils literal notranslate"><span class="pre">pc2</span></code> respectively, which are new columns that were added to the data by the previous <code class="docutils literal notranslate"><span class="pre">pca</span></code> command. The option <code class="docutils literal notranslate"><span class="pre">--hue</span> <span class="pre">species</span></code> assigns colours
to points in the scatter plot based on the <code class="docutils literal notranslate"><span class="pre">species</span></code> categorical column. In this example
Gurita defaults to saving the plot in a file called <code class="docutils literal notranslate"><span class="pre">scatter.pc1.pc2.species.png</span></code>, however, as with all defaults, this can be overridden.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are a number of things to note about command chains:</p>
<ul class="simple">
<li><p>Plotting and summary information commands do not modify the data. They simply perform their respective task on the current data set (such as making a plot) and then pass the same data along unchanged to the next command in the chain.</p></li>
<li><p>If the last command in a chain is a transformation Gurita will assume that you want the transformed data to be sent to the standard output, so it will do this automatically for you.</p></li>
<li><p>If the last command in a chain is a plotting command, then Gurita will assume that your primary goal was to generate the plot, and therefore it will not automatically send the data to the standard output at the end. You can override
this behaviour by adding an explicit <code class="docutils literal notranslate"><span class="pre">out</span></code> command at the end of the chain.</p></li>
<li><p>You may have more than one plotting command in a chain.</p></li>
</ul>
</div>
</section>
</section>
<section id="getting-help">
<span id="help"></span><h2>Getting help<a class="headerlink" href="#getting-help" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">-h</span></code> or <code class="docutils literal notranslate"><span class="pre">--help</span></code> command line arguments give an overview of Gurita’s command line syntax:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita -h
</pre></div>
</div>
<p>Help information for each command can be requested with <code class="docutils literal notranslate"><span class="pre">-h</span></code> or <code class="docutils literal notranslate"><span class="pre">--help</span></code>
after the command name:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita &lt;command&gt; -h
</pre></div>
</div>
<p>For example, to get specific help about histograms, use:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita hist -h
</pre></div>
</div>
<p>This will display a detailed help message for the <code class="docutils literal notranslate"><span class="pre">hist</span></code> command, likewise for all other commands.</p>
</section>
<section id="version-number">
<span id="version"></span><h2>Version number<a class="headerlink" href="#version-number" title="Permalink to this headline"></a></h2>
<p>Gurita uses <a class="reference external" href="https://semver.org/">semantic versioning</a>, such that its version number has three parts:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>major.minor.patch
</pre></div>
</div>
<p>The major version number indicates significant changes in the behaviour and compatibility of the program. A change in major version number indicates that the different versions may not be entirely compatible with each other.</p>
<p>The minor version number indicates a change in functionality that is backwards compatible within the corresponding major version. For example, this could indicate the addition of a feature that was not previously present, but does not interfere with existing features.</p>
<p>The patch version number indicates a backwards compatible change that does not change functionality in a significant way. This is usually used for bug fixes.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--version</span></code> (<code class="docutils literal notranslate"><span class="pre">-v</span></code>) command line argument causes Gurita to print its version number.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita --version
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gurita -v
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="example_input_data.html" class="btn btn-neutral float-left" title="Example input data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="input_output.html" class="btn btn-neutral float-right" title="Input and output" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>